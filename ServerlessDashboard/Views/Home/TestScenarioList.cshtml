@model IOrderedEnumerable<ServerlessResultManager.TestScenario>

@{
    ViewBag.Title = "Test list";
}

<input type="button" id="select-tests" value="Compare selected" />
<table style="border: 1px solid black">
    <thead style="border: 1px solid black">
        <tr>
            <th></th>
            <th>Id</th>
            <th>Name</th>
            <th>Start time</th>
            <th>End time</th>
            <th>Test count</th>
        </tr>
    </thead>
    <tbody style="border: 1px solid black">
        @foreach (var testScenario in Model)
        {
            <tr style="border: 1px solid black">
                <td class="test-checkbox"><input type="checkbox" class="test-id" value="@testScenario.Id" /></td>
                <td>@testScenario.Id</td>
                <td>@Html.RouteLink(testScenario.Name, "TestScenario", new { id = testScenario.Id })</td>
                <td>@testScenario.StartTimeUtc</td>
                <td>@testScenario.EndTimeUtc</td>
                <td>@testScenario.Tests.Count()</td>
            </tr>

            }
    </tbody>
</table>

<script>
    $(function() {
        $("#select-tests").click(function () {
            var ids = [];
            var length = $(".test-id:checkbox:checked").length;

            if (length != 2) {
                alert("Failed to compare scenarios, select 2 scenarios to compare");
            } else {

                $(".test-id:checkbox:checked").each(function () {
                    ids.push($(this).val());
                });

                var idsString = ids.reduce(function (a, b) {
                    return a + "/" + b;
                }, "");

                idsString = idsString.substring(1, idsString.length);
                window.location = "/compareScenarios/" + idsString;
            }
        });
    })
</script>
